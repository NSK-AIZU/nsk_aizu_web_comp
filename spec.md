# **「画面de田んぼ」Webアプリケーション仕様書 (Ver 3.0)**

プロジェクト: NPO法人 NSK_Aizu Webコンテンツ拡充
変更点: 「お茶碗一杯への道のり（デバイス換算）」機能の追加
技術: HTML5, CSS3 (Vanilla), JavaScript (Vanilla)

# **1. 改訂の目的**

単に収穫量（g）を表示するだけでなく、「お茶碗一杯（150g）」という明確なゴールとのギャップを提示することで、ユーザーに「スマホ画面サイズがいかに小さいか（＝農業には広大な土地が必要か）」を強烈に印象付ける。

# **2. 追加・変更機能要件**

## **2.1 定数定義の追加**

• **目標値:** お茶碗一杯のご飯 ＝ `150g`
• **1シーズン:** 年1回の収穫と定義する（表記上の補足）。

## **2.2 計算ロジックの追加**

## 既存の収穫量計算に加え、以下の値を算出する。
1. 達成率 (%)

 $\text{達成率} = \left( \frac{\text{現在の収穫量}(g)}{150g} \right) \times 100$
2. 必要デバイス台数 (台)

$\text{必要台数} = \text{切り上げ} \left( \frac{150g}{\text{現在の収穫量}(g)} \right)$

※ 現在の画面サイズと同じデバイスが、あと何台あればお茶碗一杯になるか。

## **2.3 UI/表示ロジックの変更**

### A. メッセージ分岐機能

計算結果に応じて、メインメッセージを動的に変化させる。
• **ケース1：収穫量が150g未満の場合（スマホ・タブレット等）**
    ◦ メイン表示: 「お茶碗一杯には足りません！」（警告色または強調）
    ◦ サブ表示: 「あなたのスマホがあと **X台** 並ぶと、ようやく一杯分になります。」
    ◦ 演出意図: 「こんなに必要なの！？」という驚きを与える。
• **ケース2：収穫量が150g以上の場合（大型モニター等）**
    ◦ メイン表示: 「素晴らしい！自給自足可能です！」
    ◦ サブ表示: 「この画面サイズなら、1シーズンで **Y杯分** のご飯が作れます。」

### **B. ビジュアライゼーションの強化**

• **既存:** 米粒（div要素）を描画。
• **追加（任意）:** 「スマホのイラストアイコン」を必要台数分並べる、またはプログレスバーで「現在地 / 150g」を可視化するなどの視覚的補助があると尚良い。（Claudeへの指示としては「テキストでの明確な提示」を必須とし、図示はCSSで可能な範囲とする）

# **3. 画面構成（レイアウト）の変更指示**

## **3.1 結果表示エリアの階層化**

情報を以下の優先順位で整理するデザインにするよう指示する。
1. **Level 1 (最重要):** 「この画面＝田んぼ」での収穫量（g）
2. **Level 2 (気付き):** お茶碗一杯に対する「不足台数」または「充足杯数」の強調表示
3. **Level 3 (詳細):** 物理サイズ(cm)、米粒換算数

## **3.2 スタイリングの調整**

• 不足台数を表示する際は、数字部分（例：「あと **13** 台」）を赤字や太字で大きく表示し、インパクトを持たせる。

# **4. Claudeへのプロンプト用 補足事項**

（Claudeにコードを書かせるときに、このメモを渡すとスムーズです）
• **実装の注意点:**
    ◦ CSSは外部フレームワークを使わず、単一HTMLファイル内の `<style>` タグに記述すること。
    ◦ 「1シーズン」という言葉がユーザーに伝わるよう、フッター等の注釈に「※年1回の収穫を想定」と明記すること。
    ◦ リサイズ時に「必要台数」もリアルタイムで再計算されること。
    ◦ `Math.ceil` を使って、必要台数は必ず整数（切り上げ）で表示すること。
